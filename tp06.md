# TP 06 - Terraform lifecyle
## Préparation

Dupliquer le projet TP05 dans le dossier tp_terraform et nommer le TP06

Dans le dossier TP06 :
 - Modifier le bloc backend avec les bons paramètres (Note : le path sera terraform/state/TP06)
 - Faire un terraform init

## Objectif du tp

L'objectif est de créer un lifecycle sur certaines resources

Appliquer les changement avec les commandes terraform  plan et apply

## Premier lifecycle.

Modification de la resource docker_container pour ajouter un bloc lifecycle qui empêche la création d’une VM et génère une erreur si 
 - la resource à créer possède: un label type=slave  ET un label statut=optional

Appliquer les changement avec les commandes terraform  plan et apply


Vérifier que les pages http://127.0.0.1:9021,http://127.0.0.1:9022 existent mais pas http://127.0.0.1:9023.


## Second  lifecycle.
Modification de la resource docker_container pour ajouter un bloc lifecycle avec une rule  "prevent_destroy" sur les containers de type master uniquement

Appliquer les changement avec les commandes terraform  plan et apply

Vérifier que les pages http://127.0.0.1:9021,http://127.0.0.1:9022 existent mais pas http://127.0.0.1:9023.
