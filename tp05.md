# TP 05 - Variables, types et locals
## Préparation

Dupliquer le projet TP04 dans le dossier tp_terraform et nommer le TP05

Dans le dossier TP05 :
 - Modifier le bloc backend avec les bons paramètres (Note : le path sera terraform/state/TP05)
 - Faire un terraform init

## Objectif du tp

L'objectif est de mutualiser du code avec des boucles for_each et des blocks dynamiques

## Transformation de 3 resources docker_container en une seule.

Supprimer les resources docker_container goapi02 et goapi03 dans le fichier main.tf

Transformer la resource goapi01 avec un for_each qui se base sur la local "containers"

Appliquer les changement avec les commandes terraform plan et apply 

Que se passe t'il ?

### Bloc dynamique

Modifier les 3 variables goapi01, goapi02, goapi03 et ajouter un attribut labels qui sera une map(string).

La clé de cette map sera un nom de label et la valeur associé sera la valeur du label.

Pour goapi01 on aura ces labels: 
  type = "master"
  statut = "mandatory"

Pour goapi02 on aura ces labels:
type = "slave"
statut = "mandatory"

Pour goapi03 on aura ces labels:
type = "slave"
statut = "optional"

Dans le resource docker, ajouter un block dynamique pour ajouter les bons labels aux containers

Appliquer les changement avec les commandes terraform  plan et apply

Vérifier que les pages http://127.0.0.1:9021,http://127.0.0.1:9022,http://127.0.0.1:9023 existent.

